<head>
  <link href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans+Condensed:400,600" rel="stylesheet">
</head>
<div layout="column" style="margin-bottom: 15px;">
  <div style="margin-top: 25px; right: 0;">
    <div class="center">
      <mat-card [ngClass]="isTimeline ? 'fixed-card' : 'example-card'">
        <mat-card-header>
          <div mat-card-avatar class="example-header-image"></div>
          <mat-card-title>Resumo: {{help.generalDescription}}</mat-card-title>
          <mat-card-subtitle>Autor: {{help.author}}</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <p>
            Descrição:
          </p>
          <p>
            {{help.detailedDescription}}
          </p>
        </mat-card-content>
        <div *ngIf="!isTimeline">
        <p>
            Respostas:
        </p>
        <h4 *ngIf="help.answers.length === 0" >Sem respostas até o momento =(</h4>
        <div *ngFor="let answer of help.answers; let i = index" layout="column" style="margin-bottom: 15px;">
          <div style="margin-top: 10px; right: 0;">
            <div>
              <mat-card>
                <mat-card-header>
                  <div mat-card-avatar class="example-header-image2"></div>
                  <mat-card-title style="margin-top: 10px"><b>{{answer.author}}</b> respondeu:</mat-card-title>
                </mat-card-header>
                <mat-card-content>
                  <p style="margin-top: 10px">
                    {{answer.answer}}
                  </p>
                  <span style="flex: 1 1 auto;"></span>
                  <button style="margin-left: 90%;" *ngIf="user.info.uid == answer.uid" mat-button class="mat-icon-button" (click)="deleteAwnser(i)">
                    <mat-icon title="Excluir">delete</mat-icon>
                  </button>
                </mat-card-content>
              </mat-card>
          </div>
          </div>
        </div>
      </div>
      <form *ngIf="!isTimeline && !commentWithPhoto" class="answer-class">
        <mat-form-field class="answer-class-width">
          <textarea name="answer" matInput placeholder="Deixe sua resposta" [(ngModel)]="currentAnswer"></textarea>
        </mat-form-field>
      </form>
      <span *ngIf="!isTimeline && commentWithPhoto">Teste</span>
        <mat-card-actions>
          <button *ngIf="isTimeline" mat-button (click)="goToHelp(help.id)">Ir para ajuda</button>
          <mat-slide-toggle *ngIf="!isTimeline" style="margin-left: 5%;"
            [(ngModel)]="commentWithPhoto"
            [disabled]="disabled">
            Responder com imagem
          </mat-slide-toggle>
          <button *ngIf="!isTimeline && user.isTutor()" mat-button [disabled]="!currentAnswer" (click)="addAnswer(currentAnswer)"
          style="background-color: rgb(27, 104, 155); color: white; margin-left: 65%;">
          <mat-icon style="padding-right: 3px">send</mat-icon>Responder</button>
        </mat-card-actions>
      </mat-card>
  </div>
  </div>
</div>
